<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="AquaGo - A Toy Project" /><meta property="og:locale" content="en" /><meta name="description" content="A Digital Aquarium written in pure golang!" /><meta property="og:description" content="A Digital Aquarium written in pure golang!" /><link rel="canonical" href="https://mzampetakis.com/posts/AquaGo-A-Toy-Project/" /><meta property="og:url" content="https://mzampetakis.com/posts/AquaGo-A-Toy-Project/" /><meta property="og:site_name" content="Michalis Zampetakis" /><meta property="og:image" content="https://mzampetakis.com/assets/posts/Aquago-A-Toy-Project/auqago.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-09-01T03:40:00+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://mzampetakis.com/assets/posts/Aquago-A-Toy-Project/auqago.png" /><meta property="twitter:title" content="AquaGo - A Toy Project" /><meta name="twitter:site" content="@mzampetakis" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-03-20T02:50:32+08:00","datePublished":"2020-09-01T03:40:00+08:00","description":"A Digital Aquarium written in pure golang!","headline":"AquaGo - A Toy Project","image":{"show_in_post":true,"url":"https://mzampetakis.com/assets/posts/Aquago-A-Toy-Project/auqago.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mzampetakis.com/posts/AquaGo-A-Toy-Project/"},"url":"https://mzampetakis.com/posts/AquaGo-A-Toy-Project/"}</script><title>AquaGo - A Toy Project | Michalis Zampetakis</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Michalis Zampetakis"><meta name="application-name" content="Michalis Zampetakis"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/sample/me.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Michalis Zampetakis</a></div><div class="site-subtitle font-italic">Curiosity Driven</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/now/" class="nav-link"> <i class="fa-fw fas fa-clock ml-xl-3 mr-xl-3 unloaded"></i> <span>NOW</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/mzampetakis" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/mzampetakis" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['mzampetakis','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="" aria-label="linkedin" > <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>AquaGo - A Toy Project</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>AquaGo - A Toy Project</h1><div class="post-meta text-muted"><div></div><div class="d-flex"><div> <span> Posted <em class="timeago" inalid-data-ts="1598902800" > Sep 1, 2020 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2135 words"> <em>11 min</em> read</span></div></div></div><img data-src="/assets/posts/Aquago-A-Toy-Project/auqago.png" class="preview-img bg" alt="Preview Image" data-proofer-ignore><div class="post-content"><p>Just imagine if you could have on your living‚Äôs room TV an aquarium! Wouldn‚Äôt that be nice, especially during the hot period of summertime? What about if you could add digital fishes and decorative stuff in this aquarium that you could create (physically or by design) with your own style?</p><p>This is more or less what I got up with during this summer!</p><blockquote><p>A real toy project!</p></blockquote><p>Two beloved things helped me implement this project. The first one is the Go programming language (alongside <a href="https://ebiten.org/">ebiten</a> a dead simple 2D gaming library for GO) and LEGOs which I used to decorate and give ‚Äúlife‚Äù to my digital aquarium.</p><p>I hope you enjoy reading this as much I enjoyed working on this and you might want to give it a try!</p><h2 id="inspiration"><span class="mr-2">Inspiration</span><a href="#inspiration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>While watching a video of a <a href="https://youtu.be/Siy1F7fUiY0?t=501">tour in the LEGO house in Denmark</a> I came across a really interesting (among a lot of) part! At 08:21 a visitor of the LEGO house can create with a few LEGO bricks a structure (sometimes they look like a fish!) that could be added ‚Äúinside‚Äù a digital aquarium after a scanning process.</p><p>That digital aquarium is consisted of a static background, some seaweeds made of LEGO bricks that wave, some background decorative stuff and the ‚Äúfishes‚Äù that visitors make out of LEGOs after adding some facial stuff (mouth, eyes etc). The scanning process of each fish takes place in a special illuminated pad that visitors put their LEGO ‚Äúfish‚Äù and a camera captures it.</p><p>This is what gave inspiration to design and develop this project during the summer of 2020.</p><blockquote><p>I really enjoyed the process of designing, developing and using it as well!</p></blockquote><p>I propose you to watch the whole video as it is really interesting and maybe you could find something to play with. üòâ</p><h2 id="setting-requirements"><span class="mr-2">Setting Requirements</span><a href="#setting-requirements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="language-"><span class="mr-2">Language üíª</span><a href="#language-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Before starting implementing this, the idea was wandering around my mind for a few days. It was clear that I would need some image processing and a gaming (2D) library. Go was already chosen as it is something I am learning at this period of time and would like to improve my skill at it somehow. <a href="https://ebiten.org/">Ebiten</a> supported my choice, as Go is not a graphics/game oriented language and I had some concerns about using this at this project.</p><h2 id="assets-"><span class="mr-2">Assets üê†</span><a href="#assets-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>So for giving life to my digital aquarium I would require to have a few things inside it to make it look alive! First of all I would like some decorative objects that could be moved (draggable) inside the aquarium. These objects are usually some seaweeds, some rocks, or even a treasure chest! I would also like to have some bubbles which would wobble towards the surface and have no other purpose rather than making te aquarium looking more realistic (as it couldn‚Äôt)! The last and more complex parts are the ‚Äúfishes‚Äù. Fishes would move ‚Äúfreely‚Äù inside the aquarium to different directions, with different speeds (or just stopped) and change moving angles! Of course, we would like to see them waving as they move around!</p><h2 id="image-transformation-"><span class="mr-2">Image Transformation üèû</span><a href="#image-transformation-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>In the image transformation part, it is clear that there are lots of different libraries out there and of course there is always the <a href="https://opencv.org/">OpenCV</a> project which could be there for me if needed. So image processing was not something to wonder about. The images should need some sort of transformation. Resizing and cropping would be the simpler tasks. But among them, it would be pretty cool if the application could remove any static background and make it transparent giving a more realistic result to our assets.</p><h3 id="no-interaction-"><span class="mr-2">No Interaction üôå</span><a href="#no-interaction-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>The last requirement was to be able to use it with less interaction as possible. I didn‚Äôt want to rerun or rebuild my app when I wanted to add a new element (decorative or fish) in the aquarium. For this reason, I wanted an online hosting where I could put my images (capture by a smart phone!) and the application could download them afterword and put those stuff inside the aquarium. Isn‚Äôt that nice?</p><blockquote><p>That‚Äôs all. Nothing more - nothing less (at least in the beginning)!</p></blockquote><h2 id="development"><span class="mr-2">Development</span><a href="#development" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>üé≤üé≤ It seems reasonable that, as real-life seems to move a little bit randomly, a random number generator function should be extensively used at initialization and runtime in order to create a more realistic and fuzzy result.<br /> üé≤üé≤</p><blockquote><p>So prepare to get surprised</p></blockquote><p>All necessary parameters that could be changed to meet someone‚Äôs needs are saved as env vars or within a special file ‚Äò.env‚Äô. More details for this can be found in the <a href="https://github.com/mzampetakis/aquago#env-vars-">project‚Äôs README</a>.</p><h3 id="tools--libraries"><span class="mr-2">Tools / Libraries</span><a href="#tools--libraries" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Apart from Go language and the <a href="https://ebiten.org/">Ebiten library</a> that used for the visualization ad movement of the aquarium‚Äôs assets, the <a href="https://pkg.go.dev/mod/github.com/anthonynsimon/bild">bild library</a> used as a collection of parallel image processing algorithms.</p><p>For the online storage and retrieval mechanism for the assets, <a href="https://drive.google.com">Google Drive</a> used and exploited through the <a href="https://developers.google.com/drive/api/v3/about-sdk">Google API v3</a> . To make those tasks easier a <a href="https://github.com/mzampetakis/gogle-drive">Google Drive‚Äôs API wrapper library</a> developed and used. The library supports the auth/authz part as well as general methods to search for files (using some filter criteria) and to download specific files. Exactly what we needed for our case!</p><h3 id="bootstrapping"><span class="mr-2">Bootstrapping</span><a href="#bootstrapping" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>So what happens when the application starts. First of all, it tries to retrieve all the newly added assets from the remote Google‚Äôs Drive folders. This is done through a goroutine which is initiated to check every minute for newly added images and download if found from the Google Drive. The mechanism to do this scheduling was implemented this way:</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">ticker</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">NewTicker</span><span class="p">(</span><span class="m">1</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">Minute</span><span class="p">)</span>
<span class="k">go</span> <span class="k">func</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="k">range</span> <span class="n">ticker</span><span class="o">.</span><span class="n">C</span> <span class="p">{</span>
        <span class="n">downloadNewImages</span><span class="p">(</span><span class="n">gogledrive</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"BGFOLDERID"</span><span class="p">),</span> <span class="n">gdriveBgFolder</span><span class="p">,</span> <span class="n">bgFolder</span><span class="p">)</span>
        <span class="n">downloadNewImages</span><span class="p">(</span><span class="n">gogledrive</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"FGFOLDERID"</span><span class="p">),</span> <span class="n">gdriveFgFolder</span><span class="p">,</span> <span class="n">fgFolder</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}()</span>
</pre></table></code></div></div><p>Using this way we will see our assets to pop up into the aquarium gradually.</p><p>For each new image, a background separation and removal algorithm removes the background based on the fact that is is a single solid color. For this reason, all images are captured with a solid color background(generally white but it could be any other color)!</p><p>This is the image transformation that occurs to each retrieved asset:</p><p><img data-src="/assets/posts/Aquago-A-Toy-Project/imgtransform.png" alt="Image Transformation process" data-proofer-ignore></p><p>Then, all transformed images/assets are placed within the aquarium with some specific and some random initial values as described in the following sections.</p><h3 id="bubbles"><span class="mr-2">Bubbles</span><a href="#bubbles" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>From the first frame and (about) every 1‚Äù one new bubble pops in from the bottom of the aquarium and starts to move to the top. Each bubble differs in size and speed and moves upwards and also to a little bit to the left or to the right randomly. In fact, it moves to one direction and based on a threshold it can randomly change direction.</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="n">randDirection</span> <span class="o">:=</span> <span class="n">Direction</span><span class="p">(</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>
<span class="k">if</span> <span class="n">randDirection</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
    <span class="n">randDirection</span> <span class="o">=</span> <span class="o">-</span><span class="m">1</span>
<span class="p">}</span>
<span class="n">scale</span> <span class="o">:=</span> <span class="n">Scale</span><span class="p">(</span><span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span> <span class="o">+</span> <span class="m">0.5</span><span class="p">)</span>
<span class="n">b</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">Bubble</span><span class="p">{</span>
    <span class="n">image</span><span class="o">:</span>     <span class="n">bblImage</span><span class="p">,</span>        <span class="c">//we could use different images in the future but now we use a single one</span>
    <span class="n">x</span><span class="o">:</span>         <span class="m">100</span><span class="p">,</span>             <span class="c">//leave a standard margin from the left</span>
    <span class="n">y</span><span class="o">:</span>         <span class="n">screenHeight</span><span class="p">,</span>    <span class="c">//bottom of the image</span>
    <span class="n">direction</span><span class="o">:</span> <span class="n">randDirection</span><span class="p">,</span>   <span class="c">//random dinitial irection - left/right</span>
    <span class="n">speed</span><span class="o">:</span>     <span class="n">Speed</span><span class="p">(</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="n">maxSpeed</span><span class="o">+</span><span class="m">1</span><span class="p">))</span> <span class="o">+</span> <span class="m">1</span><span class="p">),</span> <span class="c">//random speed</span>
    <span class="n">scale</span><span class="o">:</span>     <span class="n">scale</span><span class="p">,</span>   <span class="c">//random scale</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Using this loop all bubbles were updated with a frequency based on their speed! Bubbles could disappear randomly or after reaching the top of the screen and direction could randomly change!</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">b</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">g</span><span class="o">.</span><span class="n">bubbles</span> <span class="p">{</span>
    <span class="c">//Determines speed by changing bubble's position according to frame count</span>
    <span class="k">if</span> <span class="n">frameCount</span><span class="o">%</span><span class="kt">int</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">speed</span><span class="o">*-</span><span class="m">1</span><span class="o">+</span><span class="p">(</span><span class="n">maxSpeed</span><span class="o">+</span><span class="m">2</span><span class="p">))</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">b</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Size</span><span class="p">()</span>
        <span class="c">//remove if bbl reaches top or randomly</span>
        <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">h</span> <span class="o">||</span> <span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">bblDisappearPossibility</span> <span class="p">{</span>
            <span class="n">g</span><span class="o">.</span><span class="n">bubbles</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">bubbles</span><span class="p">[</span><span class="o">:</span><span class="n">idx</span><span class="p">],</span> <span class="n">g</span><span class="o">.</span><span class="n">bubbles</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="m">1</span><span class="o">:</span><span class="p">]</span><span class="o">...</span><span class="p">)</span>
            <span class="n">bblMux</span><span class="o">.</span><span class="n">Unlock</span><span class="p">()</span>
            <span class="k">continue</span>
        <span class="p">}</span>
        <span class="n">b</span><span class="o">.</span><span class="n">y</span><span class="o">--</span>
        <span class="c">// 33% chance to go just straight up</span>
        <span class="c">// looks more smooth in transition</span>
        <span class="k">if</span> <span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="m">3</span><span class="p">)</span> <span class="o">==</span> <span class="m">1</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">bblDirectionPossibility</span> <span class="p">{</span>
                <span class="n">b</span><span class="o">.</span><span class="n">direction</span> <span class="o">*=</span> <span class="o">-</span><span class="m">1</span>
            <span class="p">}</span>
            <span class="n">b</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="kt">int</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">direction</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>All this resulted in this beautiful result:</p><p><img data-src="/assets/posts/Aquago-A-Toy-Project/bubbles.gif" alt="Moving Bubbles" data-proofer-ignore></p><h3 id="background-items"><span class="mr-2">Background Items</span><a href="#background-items" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Background items are retrieved through Google Drive at bootstrap and are checked for newly added every minute. If any new asset is found it is processed and then randomly is being placed into the aquarium. These items are able to be repositioned by dragging them so we could decorate the aquarium based on our mood!</p><blockquote><p>These items are a bit dull as their only option is the image used and their position.</p></blockquote><p><img data-src="/assets/posts/Aquago-A-Toy-Project/bg.png" alt="BG assets" data-proofer-ignore></p><h3 id="foreground-items"><span class="mr-2">Foreground Items</span><a href="#foreground-items" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Time to give some life to our aquarium! This one was the biggest challenge! Digital fishes should move around the aquarium to different directions with different speeds and angles and all of them could be randomly change - something as real fish in an aquarium! So, as you can see, the fish structure holds all those relevant data alongside some basic information for the current position and its name (that was the file‚Äôs name)!</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">fishImage</span><span class="o">.</span><span class="n">Size</span><span class="p">()</span>
<span class="n">randDirection</span> <span class="o">:=</span> <span class="n">Direction</span><span class="p">(</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>
<span class="k">if</span> <span class="n">randDirection</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
    <span class="n">randDirection</span> <span class="o">=</span> <span class="o">-</span><span class="m">1</span>
<span class="p">}</span>
<span class="n">angleDirection</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
<span class="k">if</span> <span class="n">angleDirection</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
    <span class="n">angleDirection</span> <span class="o">=</span> <span class="o">-</span><span class="m">1</span>
<span class="p">}</span>
<span class="n">f</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">Fish</span><span class="p">{</span>
    <span class="n">image</span><span class="o">:</span>         <span class="n">fishImage</span><span class="p">,</span>
    <span class="n">name</span><span class="o">:</span>          <span class="n">d</span><span class="o">.</span><span class="n">Name</span><span class="p">(),</span>
    <span class="n">x</span><span class="o">:</span>             <span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="n">screenWidth</span> <span class="o">-</span> <span class="n">w</span><span class="p">),</span>
    <span class="n">y</span><span class="o">:</span>             <span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="n">screenHeight</span> <span class="o">-</span> <span class="n">h</span><span class="p">),</span>
    <span class="n">direction</span><span class="o">:</span>     <span class="n">randDirection</span><span class="p">,</span>
    <span class="n">speed</span><span class="o">:</span>         <span class="n">Speed</span><span class="p">(</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="n">maxSpeed</span><span class="o">+</span><span class="m">1</span><span class="p">))</span> <span class="o">+</span> <span class="m">1</span><span class="p">),</span>
    <span class="n">angle</span><span class="o">:</span>         <span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span> <span class="o">/</span> <span class="m">2</span> <span class="o">*</span> <span class="kt">float64</span><span class="p">(</span><span class="n">angleDirection</span><span class="p">),</span>
    <span class="n">skew</span><span class="o">:</span>          <span class="kt">float64</span><span class="p">(</span><span class="m">0.05</span><span class="p">),</span>
    <span class="n">skewDirection</span><span class="o">:</span> <span class="m">1</span><span class="p">,</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The angle is used to allow fishes to move upwards and downwards while skew and skew direction used to transform each fish in order to see them ‚Äòswimming‚Äô - somehow. Skew changes direction more frequently when fishes move faster compared to the slower one.</p><p>This is the part that updates our fishes in the aquarium:</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">f</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">g</span><span class="o">.</span><span class="n">fishes</span> <span class="p">{</span>
    <span class="c">//Determines speed by changing fishe's position according to frame count</span>
    <span class="k">if</span> <span class="n">frameCount</span><span class="o">%</span><span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">speed</span><span class="o">*-</span><span class="m">1</span><span class="o">+</span><span class="p">(</span><span class="n">maxSpeed</span><span class="o">+</span><span class="m">2</span><span class="p">))</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">f</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Size</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="m">0</span> <span class="o">||</span> <span class="n">f</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">screenHeight</span><span class="o">-</span><span class="n">h</span> <span class="p">{</span>
            <span class="n">f</span><span class="o">.</span><span class="n">angle</span> <span class="o">*=</span> <span class="o">-</span><span class="m">1</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">fishAnglePossibility</span> <span class="p">{</span>
                <span class="n">angleDirection</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">angleDirection</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
                    <span class="n">angleDirection</span> <span class="o">=</span> <span class="o">-</span><span class="m">1</span>
                <span class="p">}</span>
                <span class="n">f</span><span class="o">.</span><span class="n">angle</span> <span class="o">+=</span> <span class="p">(</span><span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span> <span class="o">-</span> <span class="m">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="m">2</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">changeSpeedRand</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">changeSpeedRand</span> <span class="o">&lt;</span> <span class="m">0.05</span> <span class="o">&amp;&amp;</span> <span class="n">f</span><span class="o">.</span><span class="n">speed</span> <span class="o">&gt;</span> <span class="m">1</span> <span class="p">{</span>
            <span class="n">f</span><span class="o">.</span><span class="n">speed</span><span class="o">--</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">changeSpeedRand</span> <span class="o">&gt;</span> <span class="m">0.95</span> <span class="o">&amp;&amp;</span> <span class="n">f</span><span class="o">.</span><span class="n">speed</span> <span class="o">&lt;=</span> <span class="n">maxSpeed</span> <span class="p">{</span>
            <span class="n">f</span><span class="o">.</span><span class="n">speed</span><span class="o">++</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">speed</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="p">{</span>
            <span class="c">//change direction if close to left/right or randomly</span>
            <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="m">0</span> <span class="o">||</span> <span class="n">f</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">screenWidth</span><span class="o">-</span><span class="n">w</span> <span class="o">||</span> <span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">fishDirectionPossibility</span> <span class="p">{</span>
                <span class="n">f</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">Direction</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">direction</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="n">f</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">direction</span><span class="p">)</span>

            <span class="n">f</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">angle</span> <span class="o">*</span> <span class="m">3</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">frameCount</span><span class="o">%</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">speed</span><span class="o">*-</span><span class="m">1</span><span class="o">+</span><span class="p">(</span><span class="n">maxSpeed</span><span class="o">+</span><span class="m">2</span><span class="p">)))</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
                <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">skew</span> <span class="o">&gt;=</span> <span class="m">0.2</span> <span class="o">||</span> <span class="n">f</span><span class="o">.</span><span class="n">skew</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="m">0.2</span> <span class="p">{</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">skewDirection</span> <span class="o">*=</span> <span class="o">-</span><span class="m">1</span>
                <span class="p">}</span>
                <span class="n">f</span><span class="o">.</span><span class="n">skew</span> <span class="o">+=</span> <span class="kt">float64</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">skewDirection</span><span class="p">)</span> <span class="o">*</span> <span class="m">0.01</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="result"><span class="mr-2">Result</span><a href="#result" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Time for fun üéÜ<br /> Combining all those we have something that meets our requirements:</p><p><img data-src="/assets/posts/Aquago-A-Toy-Project/aquago.gif" alt="Aquago in action" data-proofer-ignore></p><h2 id="projects-challenges"><span class="mr-2">Project‚Äôs Challenges</span><a href="#projects-challenges" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>The most challenging aspect of this project was the part of designing. One basic requirement should be met - be as easy as possible to update the aquarium‚Äôs content. This was the reason that google drive set up, background removal algorithm incorporated, polling for new images added, and so on‚Ä¶</p><p>The next challenging part was to make this app run effortlessly by any user. So easy as grabbing the code, setting up Google Drive‚Äôs oAuth and run it!</p><p>The last one had to do with the gaming part of the app. Now being a game developer made me try harder to get up with how are game engines (such as ebiten) usually work. To be honest, I really enjoyed this part as this introduced me to a new field!</p><h2 id="improvements"><span class="mr-2">Improvements</span><a href="#improvements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><p>The first major improvement that has to be done has to do with the background removal algorithm (contour extraction could be used here). There are numerous algorithms to use, however, we have to keep performance in mind which is critical at least at startup time.</p><li><p>Some tasks could be executed concurrently. For instance, each image could be downloaded and then processed asynchronously.</p><li><p>Also we might consider removing the necessity to use Google Drive in case someone doesn‚Äôt want to use it.</p><li><p>Fish waving function could also be improved to provide a more realistic result.</p></ul><h2 id="more-info"><span class="mr-2">More Info</span><a href="#more-info" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>The whole project is hosted under <a href="https://github.com/mzampetakis/aquago">https://github.com/mzampetakis/aquago</a> repo where you can find more technical details of the project. The Google‚Äôs drive wrapper library is located under <a href="https://github.com/mzampetakis/gogle-drive">https://github.com/mzampetakis/gogle-drive</a> repo with some technical details as well.</p><h3 id="contributions-are-more-than-welcome-in-form-of-prs-issues-even-with-a-simple-comment-down-here-but-most-importantly-i-would-like-to-know-if-you-enjoyed-this"><span class="mr-2">Contributions are more than welcome in form of PRs, issues, even with a simple comment down here! But most importantly I would like to know if you enjoyed this!</span><a href="#contributions-are-more-than-welcome-in-form-of-prs-issues-even-with-a-simple-comment-down-here-but-most-importantly-i-would-like-to-know-if-you-enjoyed-this" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/toy-project/" class="post-tag no-text-decoration" >toy-project</a> <a href="/tags/golang/" class="post-tag no-text-decoration" >golang</a> <a href="/tags/coding/" class="post-tag no-text-decoration" >coding</a> <a href="/tags/oauth/" class="post-tag no-text-decoration" >oAuth</a> <a href="/tags/image-processing/" class="post-tag no-text-decoration" >image-processing</a> <a href="/tags/lego/" class="post-tag no-text-decoration" >LEGO</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AquaGo+-+A+Toy+Project+-+Michalis+Zampetakis&url=https%3A%2F%2Fmzampetakis.com%2Fposts%2FAquaGo-A-Toy-Project%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AquaGo+-+A+Toy+Project+-+Michalis+Zampetakis&u=https%3A%2F%2Fmzampetakis.com%2Fposts%2FAquaGo-A-Toy-Project%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmzampetakis.com%2Fposts%2FAquaGo-A-Toy-Project%2F&text=AquaGo+-+A+Toy+Project+-+Michalis+Zampetakis" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/testing/">testing</a> <a class="post-tag" href="/tags/blogging/">blogging</a> <a class="post-tag" href="/tags/image-processing/">image-processing</a> <a class="post-tag" href="/tags/lego/">LEGO</a> <a class="post-tag" href="/tags/oauth/">oAuth</a> <a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/time/">time</a> <a class="post-tag" href="/tags/toy-project/">toy-project</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Log-Requests-in-Go/"><div class="card-body"> <em class="timeago small" inalid-data-ts="1597696800" > Aug 18, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Log Requests in Go</h3><div class="text-muted small"><p> It‚Äôs a common sense that logging your HTTP request in your application is essential. The reasons for doing so are numerous. Error reporting, tracing, monitoring, performance tuning and so on. One ...</p></div></div></a></div><div class="card"> <a href="/posts/Deep-Dive-in-Go-Channels/"><div class="card-body"> <em class="timeago small" inalid-data-ts="1604123700" > Oct 31, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Deep Dive in Go Channels</h3><div class="text-muted small"><p> One of the biggest advantages of Go is undoubtedly it‚Äôs concurrency management. Goroutines are the main feature that Go uses to achieve this. Goroutines wouldn‚Äôt be so easy if there wasn‚Äôt for chan...</p></div></div></a></div><div class="card"> <a href="/posts/Exec-Command/"><div class="card-body"> <em class="timeago small" inalid-data-ts="1620319200" > May 7, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Exec.Command</h3><div class="text-muted small"><p> One of the key features of Go is the considerably rich standard library. Go‚Äôs os package offers a wide range of methods and functions to allow programmers to exploit the host‚Äôs OS capabilities. U...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Log-Requests-in-Go/" class="btn btn-outline-primary" prompt="Older"><p>Log Requests in Go</p></a> <a href="/posts/Testing-When-Time-Matters/" class="btn btn-outline-primary" prompt="Newer"><p>Testing When Time Matters</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> ¬© 2023 <a href="https://mzampetakis.com">Michalis Zampetakis</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme. Images from <a href="https://unsplash.com/" target="_blank" rel="noopener">Unsplash</a></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/testing/">testing</a> <a class="post-tag" href="/tags/blogging/">blogging</a> <a class="post-tag" href="/tags/image-processing/">image-processing</a> <a class="post-tag" href="/tags/lego/">LEGO</a> <a class="post-tag" href="/tags/oauth/">oAuth</a> <a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/time/">time</a> <a class="post-tag" href="/tags/toy-project/">toy-project</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-172730569-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-172730569-1'); }); </script>
